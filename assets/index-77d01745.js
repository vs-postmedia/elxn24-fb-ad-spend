var ve=Object.defineProperty;var we=(e,t,n)=>t in e?ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Z=(e,t,n)=>(we(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function U(){}function ce(e){return e()}function ne(){return Object.create(null)}function V(e){e.forEach(ce)}function ue(e){return typeof e=="function"}function fe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let B;function $e(e,t){return e===t?!0:(B||(B=document.createElement("a")),B.href=t,e===B.href)}function be(e){return Object.keys(e).length===0}function u(e,t){e.appendChild(t)}function q(e,t,n){e.insertBefore(t,n||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function _(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function b(){return L(" ")}function re(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ce(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function oe(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let W;function xe(){if(W===void 0){W=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{W=!0}}return W}function Ee(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=_("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const o=xe();let s;return o?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=re(window,"message",a=>{a.source===r.contentWindow&&t()})):(r.src="about:blank",r.onload=()=>{s=re(r.contentWindow,"resize",t),t()}),u(e,r),()=>{(o||s&&r.contentWindow)&&s(),N(r)}}let F;function R(e){F=e}function Ae(){if(!F)throw new Error("Function called outside component initialization");return F}function Te(e){Ae().$$.on_mount.push(e)}const I=[],ie=[];let M=[];const se=[],Ne=Promise.resolve();let ee=!1;function Oe(){ee||(ee=!0,Ne.then(de))}function H(e){M.push(e)}const Y=new Set;let S=0;function de(){if(S!==0)return;const e=F;do{try{for(;S<I.length;){const t=I[S];S++,R(t),je(t.$$)}}catch(t){throw I.length=0,S=0,t}for(R(null),I.length=0,S=0;ie.length;)ie.pop()();for(let t=0;t<M.length;t+=1){const n=M[t];Y.has(n)||(Y.add(n),n())}M.length=0}while(I.length);for(;se.length;)se.pop()();ee=!1,Y.clear(),R(e)}function je(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}function ze(e){const t=[],n=[];M.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),M=t}const k=new Set;let Le;function pe(e,t){e&&e.i&&(k.delete(e),e.i(t))}function Se(e,t,n,r){if(e&&e.o){if(k.has(e))return;k.add(e),Le.c.push(()=>{k.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function qe(e){e&&e.c()}function he(e,t,n){const{fragment:r,after_update:o}=e.$$;r&&r.m(t,n),H(()=>{const s=e.$$.on_mount.map(ce).filter(ue);e.$$.on_destroy?e.$$.on_destroy.push(...s):V(s),e.$$.on_mount=[]}),o.forEach(H)}function me(e,t){const n=e.$$;n.fragment!==null&&(ze(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ie(e,t){e.$$.dirty[0]===-1&&(I.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ge(e,t,n,r,o,s,a=null,w=[-1]){const g=F;R(e);const l=e.$$={fragment:null,ctx:[],props:s,update:U,not_equal:o,bound:ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(g?g.$$.context:[])),callbacks:ne(),dirty:w,skip_bound:!1,root:t.target||g.$$.root};a&&a(l.root);let d=!1;if(l.ctx=n?n(e,t.props||{},(i,f,...h)=>{const p=h.length?h[0]:f;return l.ctx&&o(l.ctx[i],l.ctx[i]=p)&&(!l.skip_bound&&l.bound[i]&&l.bound[i](p),d&&Ie(e,i)),f}):[],l.update(),d=!0,V(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const i=Ce(t.target);l.fragment&&l.fragment.l(i),i.forEach(N)}else l.fragment&&l.fragment.c();t.intro&&pe(e.$$.fragment),he(e,t.target,t.anchor),de()}R(g)}class _e{constructor(){Z(this,"$$");Z(this,"$$set")}$destroy(){me(this,1),this.$destroy=U}$on(t,n){if(!ue(n))return U;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Me="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Me);var ae={},J={},K=34,P=10,Q=13;function ye(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function De(e,t){var n=ye(e);return function(r,o){return t(n(r),o,e)}}function le(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var o in r)o in t||n.push(t[o]=o)}),n}function $(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Pe(e){return e<0?"-"+$(-e,6):e>9999?"+"+$(e,6):$(e,4)}function Re(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Pe(e.getUTCFullYear())+"-"+$(e.getUTCMonth()+1,2)+"-"+$(e.getUTCDate(),2)+(o?"T"+$(t,2)+":"+$(n,2)+":"+$(r,2)+"."+$(o,3)+"Z":r?"T"+$(t,2)+":"+$(n,2)+":"+$(r,2)+"Z":n||t?"T"+$(t,2)+":"+$(n,2)+"Z":"")}function Ue(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(i,f){var h,p,c=o(i,function(y,v){if(h)return h(y,v-1);p=y,h=f?De(y,f):ye(y)});return c.columns=p||[],c}function o(i,f){var h=[],p=i.length,c=0,y=0,v,E=p<=0,x=!1;i.charCodeAt(p-1)===P&&--p,i.charCodeAt(p-1)===Q&&--p;function A(){if(E)return J;if(x)return x=!1,ae;var T,j=c,C;if(i.charCodeAt(j)===K){for(;c++<p&&i.charCodeAt(c)!==K||i.charCodeAt(++c)===K;);return(T=c)>=p?E=!0:(C=i.charCodeAt(c++))===P?x=!0:C===Q&&(x=!0,i.charCodeAt(c)===P&&++c),i.slice(j+1,T-1).replace(/""/g,'"')}for(;c<p;){if((C=i.charCodeAt(T=c++))===P)x=!0;else if(C===Q)x=!0,i.charCodeAt(c)===P&&++c;else if(C!==n)continue;return i.slice(j,T)}return E=!0,i.slice(j,p)}for(;(v=A())!==J;){for(var O=[];v!==ae&&v!==J;)O.push(v),v=A();f&&(O=f(O,y++))==null||h.push(O)}return h}function s(i,f){return i.map(function(h){return f.map(function(p){return d(h[p])}).join(e)})}function a(i,f){return f==null&&(f=le(i)),[f.map(d).join(e)].concat(s(i,f)).join(`
`)}function w(i,f){return f==null&&(f=le(i)),s(i,f).join(`
`)}function g(i){return i.map(l).join(`
`)}function l(i){return i.map(d).join(e)}function d(i){return i==null?"":i instanceof Date?Re(i):t.test(i+="")?'"'+i.replace(/"/g,'""')+'"':i}return{parse:r,parseRows:o,format:a,formatBody:w,formatRows:g,formatRow:l,formatValue:d}}var Fe=Ue(","),Be=Fe.parse;function We(e){let t,n,r,o,s,a,w,g,l,d,i,f,h,p,c,y,v,E,x,A,O,T,j,C,te;return{c(){t=_("div"),n=_("div"),r=_("div"),o=_("p"),o.textContent="NDP",s=b(),a=_("h1"),w=L("$"),g=L(e[2]),l=b(),d=_("div"),i=_("p"),i.textContent="Conservative",f=b(),h=_("h1"),p=L("$"),c=L(e[3]),y=b(),v=_("div"),E=_("p"),E.textContent="Green",x=b(),A=_("h1"),O=L("$"),T=L(e[1]),j=b(),C=_("p"),C.textContent="As of Sept. 21",m(o,"class","party svelte-11qez1a"),m(a,"class","svelte-11qez1a"),m(r,"class","ndp"),m(i,"class","party svelte-11qez1a"),m(h,"class","svelte-11qez1a"),m(d,"class","cons"),m(E,"class","party svelte-11qez1a"),m(A,"class","svelte-11qez1a"),m(v,"class","green"),m(n,"class","list svelte-11qez1a"),m(C,"class","timestamp svelte-11qez1a"),m(t,"class","chart-container svelte-11qez1a"),H(()=>e[5].call(t))},m(z,D){q(z,t,D),u(t,n),u(n,r),u(r,o),u(r,s),u(r,a),u(a,w),u(a,g),u(n,l),u(n,d),u(d,i),u(d,f),u(d,h),u(h,p),u(h,c),u(n,y),u(n,v),u(v,E),u(v,x),u(v,A),u(A,O),u(A,T),u(t,j),u(t,C),te=Ee(t,e[5].bind(t))},p(z,[D]){D&4&&G(g,z[2]),D&8&&G(c,z[3]),D&2&&G(T,z[1])},i:U,o:U,d(z){z&&N(t),te()}}}function X(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ke(e,t,n){let r,o,s,{data:a=[]}=t,w=500;function g(){w=this.clientWidth,n(0,w)}return e.$$set=l=>{"data"in l&&n(4,a=l.data)},e.$$.update=()=>{e.$$.dirty&16&&console.log(a),e.$$.dirty&16&&n(3,r=a.length>0?X(a.filter(l=>l.page_name==="Conservative")[0].total):null),e.$$.dirty&16&&n(2,o=a.length>0?X(a.filter(l=>l.page_name==="NDP")[0].total):null),e.$$.dirty&16&&n(1,s=a.length>0?X(a.filter(l=>l.page_name==="Green")[0].total):null)},[w,s,o,r,a,g]}class He extends _e{constructor(t){super(),ge(this,t,ke,We,fe,{data:4})}}function Ve(e){let t,n,r,o,s,a,w,g,l,d,i,f,h,p;return a=new He({props:{data:e[0]}}),{c(){t=_("header"),t.innerHTML='<h1 class="svelte-xwy6fx">Ad spending on Meta in B.C.â€™s 2024 election</h1>',n=b(),r=_("main"),o=_("h2"),o.textContent="Total amount spent",s=b(),qe(a.$$.fragment),w=b(),g=_("h2"),g.textContent="Daily ad spending",l=b(),d=_("iframe"),f=b(),h=_("footer"),h.innerHTML='<p class="note">NOTE: Data includes spending by the official Facebook pages for each party. The minimum daily total provided by Facebook is $100, so expenditures may have been less on days showing $100. Data includes ads placed on Facebook, Instagram, WhatsApp and Messenger.</p> <p class="source">Source:  <a href="https://www.facebook.com/ads/library/report/?source=onboarding" target="_blank">Facebook Ad Library</a></p>',m(t,"class","svelte-xwy6fx"),m(o,"class","svelte-xwy6fx"),m(g,"class","svelte-xwy6fx"),$e(d.src,i="https://flo.uri.sh/visualisation/19631149/embed")||m(d,"src",i),m(d,"title","Interactive or visual content"),m(d,"frameborder","0"),m(d,"scrolling","no"),oe(d,"width","100%"),oe(d,"height","350px"),m(d,"sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),m(r,"class","svelte-xwy6fx")},m(c,y){q(c,t,y),q(c,n,y),q(c,r,y),u(r,o),u(r,s),he(a,r,null),u(r,w),u(r,g),u(r,l),u(r,d),q(c,f,y),q(c,h,y),p=!0},p(c,[y]){const v={};y&1&&(v.data=c[0]),a.$set(v)},i(c){p||(pe(a.$$.fragment,c),p=!0)},o(c){Se(a.$$.fragment,c),p=!1},d(c){c&&(N(t),N(n),N(r),N(f),N(h)),me(a)}}}const Ze="https://vs-postmedia-data.sfo2.digitaloceanspaces.com/elxn/elxn2024/total-fb-ad-spend.csv";function Ge(e,t,n){let r;async function o(a){const g=await(await fetch(a)).text();return Be(g)}async function s(){n(0,r=await o(Ze))}return Te(s),[r]}class Ye extends _e{constructor(t){super(),ge(this,t,Ge,Ve,fe,{})}}new Ye({target:document.getElementById("app")});
