var vt=Object.defineProperty;var wt=(t,e,n)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>(wt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function B(){}function ct(t){return t()}function nt(){return Object.create(null)}function V(t){t.forEach(ct)}function ut(t){return typeof t=="function"}function ft(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let W;function $t(t,e){return t===e?!0:(W||(W=document.createElement("a")),W.href=e,t===W.href)}function bt(t){return Object.keys(t).length===0}function u(t,e){t.appendChild(e)}function M(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function _(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function b(){return S(" ")}function rt(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ct(t){return Array.from(t.childNodes)}function G(t,e){e=""+e,t.data!==e&&(t.data=e)}function ot(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}let k;function xt(){if(k===void 0){k=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{k=!0}}return k}function Et(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=_("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const o=xt();let s;return o?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=rt(window,"message",a=>{a.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{s=rt(r.contentWindow,"resize",e),e()}),u(t,r),()=>{(o||s&&r.contentWindow)&&s(),T(r)}}let z;function F(t){z=t}function At(){if(!z)throw new Error("Function called outside component initialization");return z}function Nt(t){At().$$.on_mount.push(t)}const P=[],it=[];let R=[];const st=[],Tt=Promise.resolve();let tt=!1;function Ot(){tt||(tt=!0,Tt.then(dt))}function H(t){R.push(t)}const Y=new Set;let I=0;function dt(){if(I!==0)return;const t=z;do{try{for(;I<P.length;){const e=P[I];I++,F(e),jt(e.$$)}}catch(e){throw P.length=0,I=0,e}for(F(null),P.length=0,I=0;it.length;)it.pop()();for(let e=0;e<R.length;e+=1){const n=R[e];Y.has(n)||(Y.add(n),n())}R.length=0}while(P.length);for(;st.length;)st.pop()();tt=!1,Y.clear(),F(t)}function jt(t){if(t.fragment!==null){t.update(),V(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}function Lt(t){const e=[],n=[];R.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),R=e}const q=new Set;let St;function pt(t,e){t&&t.i&&(q.delete(t),t.i(e))}function It(t,e,n,r){if(t&&t.o){if(q.has(t))return;q.add(t),St.c.push(()=>{q.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Mt(t){t&&t.c()}function ht(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),H(()=>{const s=t.$$.on_mount.map(ct).filter(ut);t.$$.on_destroy?t.$$.on_destroy.push(...s):V(s),t.$$.on_mount=[]}),o.forEach(H)}function mt(t,e){const n=t.$$;n.fragment!==null&&(Lt(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Pt(t,e){t.$$.dirty[0]===-1&&(P.push(t),Ot(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function gt(t,e,n,r,o,s,a=null,w=[-1]){const g=z;F(t);const l=t.$$={fragment:null,ctx:[],props:s,update:B,not_equal:o,bound:nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(g?g.$$.context:[])),callbacks:nt(),dirty:w,skip_bound:!1,root:e.target||g.$$.root};a&&a(l.root);let d=!1;if(l.ctx=n?n(t,e.props||{},(i,f,...h)=>{const p=h.length?h[0]:f;return l.ctx&&o(l.ctx[i],l.ctx[i]=p)&&(!l.skip_bound&&l.bound[i]&&l.bound[i](p),d&&Pt(t,i)),f}):[],l.update(),d=!0,V(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const i=Ct(e.target);l.fragment&&l.fragment.l(i),i.forEach(T)}else l.fragment&&l.fragment.c();e.intro&&pt(t.$$.fragment),ht(t,e.target,e.anchor),dt()}F(g)}class _t{constructor(){Z(this,"$$");Z(this,"$$set")}$destroy(){mt(this,1),this.$destroy=B}$on(e,n){if(!ut(n))return B;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!bt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Rt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Rt);var at={},J={},K=34,D=10,Q=13;function yt(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Ut(t,e){var n=yt(t);return function(r,o){return e(n(r),o,t)}}function lt(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var o in r)o in e||n.push(e[o]=o)}),n}function $(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Dt(t){return t<0?"-"+$(-t,6):t>9999?"+"+$(t,6):$(t,4)}function Ft(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Dt(t.getUTCFullYear())+"-"+$(t.getUTCMonth()+1,2)+"-"+$(t.getUTCDate(),2)+(o?"T"+$(e,2)+":"+$(n,2)+":"+$(r,2)+"."+$(o,3)+"Z":r?"T"+$(e,2)+":"+$(n,2)+":"+$(r,2)+"Z":n||e?"T"+$(e,2)+":"+$(n,2)+"Z":"")}function Bt(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(i,f){var h,p,c=o(i,function(y,v){if(h)return h(y,v-1);p=y,h=f?Ut(y,f):yt(y)});return c.columns=p||[],c}function o(i,f){var h=[],p=i.length,c=0,y=0,v,E=p<=0,x=!1;i.charCodeAt(p-1)===D&&--p,i.charCodeAt(p-1)===Q&&--p;function A(){if(E)return J;if(x)return x=!1,at;var N,j=c,C;if(i.charCodeAt(j)===K){for(;c++<p&&i.charCodeAt(c)!==K||i.charCodeAt(++c)===K;);return(N=c)>=p?E=!0:(C=i.charCodeAt(c++))===D?x=!0:C===Q&&(x=!0,i.charCodeAt(c)===D&&++c),i.slice(j+1,N-1).replace(/""/g,'"')}for(;c<p;){if((C=i.charCodeAt(N=c++))===D)x=!0;else if(C===Q)x=!0,i.charCodeAt(c)===D&&++c;else if(C!==n)continue;return i.slice(j,N)}return E=!0,i.slice(j,p)}for(;(v=A())!==J;){for(var O=[];v!==at&&v!==J;)O.push(v),v=A();f&&(O=f(O,y++))==null||h.push(O)}return h}function s(i,f){return i.map(function(h){return f.map(function(p){return d(h[p])}).join(t)})}function a(i,f){return f==null&&(f=lt(i)),[f.map(d).join(t)].concat(s(i,f)).join(`
`)}function w(i,f){return f==null&&(f=lt(i)),s(i,f).join(`
`)}function g(i){return i.map(l).join(`
`)}function l(i){return i.map(d).join(t)}function d(i){return i==null?"":i instanceof Date?Ft(i):e.test(i+="")?'"'+i.replace(/"/g,'""')+'"':i}return{parse:r,parseRows:o,format:a,formatBody:w,formatRows:g,formatRow:l,formatValue:d}}var zt=Bt(","),Wt=zt.parse;function kt(t){let e,n,r,o,s,a,w,g,l,d,i,f,h,p,c,y,v,E,x,A,O,N,j,C,et;return{c(){e=_("div"),n=_("div"),r=_("div"),o=_("p"),o.textContent="NDP",s=b(),a=_("h1"),w=S("$"),g=S(t[2]),l=b(),d=_("div"),i=_("p"),i.textContent="Conservative",f=b(),h=_("h1"),p=S("$"),c=S(t[3]),y=b(),v=_("div"),E=_("p"),E.textContent="Green",x=b(),A=_("h1"),O=S("$"),N=S(t[1]),j=b(),C=_("p"),C.textContent="As of Sept. 21",m(o,"class","party svelte-m0awt4"),m(a,"class","svelte-m0awt4"),m(r,"class","ndp"),m(i,"class","party svelte-m0awt4"),m(h,"class","svelte-m0awt4"),m(d,"class","cons"),m(E,"class","party svelte-m0awt4"),m(A,"class","svelte-m0awt4"),m(v,"class","green"),m(n,"class","list svelte-m0awt4"),m(C,"class","timestamp svelte-m0awt4"),m(e,"class","chart-container svelte-m0awt4"),H(()=>t[5].call(e))},m(L,U){M(L,e,U),u(e,n),u(n,r),u(r,o),u(r,s),u(r,a),u(a,w),u(a,g),u(n,l),u(n,d),u(d,i),u(d,f),u(d,h),u(h,p),u(h,c),u(n,y),u(n,v),u(v,E),u(v,x),u(v,A),u(A,O),u(A,N),u(e,j),u(e,C),et=Et(e,t[5].bind(e))},p(L,[U]){U&4&&G(g,L[2]),U&8&&G(c,L[3]),U&2&&G(N,L[1])},i:B,o:B,d(L){L&&T(e),et()}}}function X(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function qt(t,e,n){let r,o,s,{data:a=[]}=e,w=500;function g(){w=this.clientWidth,n(0,w)}return t.$$set=l=>{"data"in l&&n(4,a=l.data)},t.$$.update=()=>{t.$$.dirty&16&&console.log(a),t.$$.dirty&16&&n(3,r=a.length>0?X(a.filter(l=>l.page_name==="Conservative")[0].total):null),t.$$.dirty&16&&n(2,o=a.length>0?X(a.filter(l=>l.page_name==="NDP")[0].total):null),t.$$.dirty&16&&n(1,s=a.length>0?X(a.filter(l=>l.page_name==="Green")[0].total):null)},[w,s,o,r,a,g]}class Ht extends _t{constructor(e){super(),gt(this,e,qt,kt,ft,{data:4})}}function Vt(t){let e,n,r,o,s,a,w,g,l,d,i,f,h,p;return a=new Ht({props:{data:t[0]}}),{c(){e=_("header"),e.innerHTML='<h1 class="svelte-xwy6fx">B.C. election ad spending on Facebook</h1>',n=b(),r=_("main"),o=_("h2"),o.textContent="Total amount spent",s=b(),Mt(a.$$.fragment),w=b(),g=_("h2"),g.textContent="Daily ad spending",l=b(),d=_("iframe"),f=b(),h=_("footer"),h.innerHTML='<p class="note">NOTE: Data includes ads identified as paid for by the three parties and covers ads placed on Facebook, Instagram, WhatsApp and Messenger. Ads purchased by the campaigns of individual candidates are not included.</p> <p class="source">Source:  <a href="https://www.facebook.com/ads/library/report/?source=onboarding" target="_blank">Facebook Ad Library</a></p>',m(e,"class","svelte-xwy6fx"),m(o,"class","svelte-xwy6fx"),m(g,"class","svelte-xwy6fx"),$t(d.src,i="https://flo.uri.sh/story/2650140/embed")||m(d,"src",i),m(d,"title","Interactive or visual content"),m(d,"frameborder","0"),m(d,"scrolling","no"),ot(d,"width","100%"),ot(d,"height","350px"),m(d,"sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),m(r,"class","svelte-xwy6fx")},m(c,y){M(c,e,y),M(c,n,y),M(c,r,y),u(r,o),u(r,s),ht(a,r,null),u(r,w),u(r,g),u(r,l),u(r,d),M(c,f,y),M(c,h,y),p=!0},p(c,[y]){const v={};y&1&&(v.data=c[0]),a.$set(v)},i(c){p||(pt(a.$$.fragment,c),p=!0)},o(c){It(a.$$.fragment,c),p=!1},d(c){c&&(T(e),T(n),T(r),T(f),T(h)),mt(a)}}}const Zt="https://vs-postmedia-data.sfo2.digitaloceanspaces.com/elxn/elxn2024/total-fb-ad-spend.csv";function Gt(t,e,n){let r;async function o(a){const g=await(await fetch(a)).text();return Wt(g)}async function s(){n(0,r=await o(Zt))}return Nt(s),[r]}class Yt extends _t{constructor(e){super(),gt(this,e,Gt,Vt,ft,{})}}new Yt({target:document.getElementById("app")});
